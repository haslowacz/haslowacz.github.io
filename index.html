<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<title>Generator hase≈Ç</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<link rel="icon" type="image/png" href="icon.png">
<style>
@import url('https://fonts.googleapis.com/css?family=VT323&display=swap');
body{margin:0;background:#131516;color:#f7e8ce;font-family:VT323,monospace;min-height:100vh}
.container{max-width:900px;margin:0 auto;padding:5vh 5vw}
.title{color:#ffe082;font-size:2em;margin-bottom:.5em}
.subtitle{color:#ff66cc;margin-bottom:1em}
.button{font-family:VT323,monospace;font-size:1.3em;padding:.3em 1.6em;color:#ffe082;background:transparent;border:2.5px solid #ffe082;border-radius:10px;cursor:pointer;box-shadow:0 2px 14px #000c;transition:.2s}
.button:hover{background:#23262a}
.list{margin-top:2em;display:flex;flex-direction:column;gap:1em}
.item{background:#181a1d;border:2px solid #80ffd7;border-radius:10px;padding:.6em .8em;display:flex;align-items:center;justify-content:space-between;gap:1em;width: 60%}
.pass{word-break: break-all;color: #fffbe6;font-size: clamp(1.4em, 2.5vw, 2em);}
.copy{font-family:VT323,monospace;font-size:1em;padding:.2em .8em;border:2px solid #ff66cc;border-radius:8px;background:transparent;color:#ff66cc;cursor:pointer}
.copy:hover{background:#2a1f28}
.footer{margin-top:3em;color:#80ffd7;font-size:.9em}
.site-footer {margin-top: 2.5em;padding-top: 1em;border-top: 1px dashed #80ffd744;display: flex;justify-content: center;align-items: center;gap: .6em;font-size: .9em;color: #80ffd7;}
.site-footer a {color: #ff66cc;text-decoration: none;transition: color .2s ease, text-shadow .2s ease;}
.site-footer a:hover {color: #ffe082;text-shadow: 0 0 6px #ffe082, 0 0 12px #ff66cc;}
.site-footer .sep {color: #ffe082;opacity: .6;}
</style>
</head>
<body>

<div class="container">
  <div class="title">Generator hase≈Ç</div>
  <div class="subtitle">2 polskie s≈Çowa + 2 cyfry + 2 znaki specjalne</div>

  <div style="display:flex; gap:1em; align-items:center;">
    <button class="button" id="genBtn">Generuj 5 hase≈Ç</button>
    <button class="button" id="moreBtn" style="font-size:1em;padding:.2em 1em;border-color:#80ffd7;color:#80ffd7">
      Generuj wiƒôcej
    </button>
  </div>

  <div class="list" id="list"></div>
  <div class="footer">Format has≈Ça: S≈ÇowoS≈Çowo13#$</div>
  <div class="footer">Autor: Damian Sta≈Ñczak</div>

  <div class="site-footer">
    <span>¬© <span id="year"></span> Generator hase≈Ç</span>
    <span class="sep">‚Ä¢</span>
    <a href="https://github.com/haslowacz/haslowacz.github.io" target="_blank">GitHub</a>
    <a href="https://pl.linkedin.com/in/damian-stanczak" target="_blank">LinkedIn</a>
  </div>
</div>

<!-- MODAL -->
<div id="modal" style="display:none;position:fixed;inset:0;background:#000c;backdrop-filter:blur(3px);z-index:1000;align-items:center;justify-content:center;">
  <div style="background:#181a1d;border:2px solid #80ffd7;border-radius:12px;padding:1.2em;max-width:90vw;max-height:85vh;overflow:auto;">
    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:.8em;">
      <span style="color:#ffe082;font-size:1.3em">20 losowych üòâ</span>
      <button id="closeModal" style="background:none;border:2px solid #ff66cc;color:#ff66cc;border-radius:8px;padding:.2em .6em;cursor:pointer">X</button>
    </div>
    <pre id="modalList" style="color:#fffbe6;font-size:1.1em;user-select:text;white-space:pre-wrap;"></pre>
  </div>
</div>

<script>
let WORDS = [];
let READY = false;

const specials = ['!','@','#','$','%','&','*','?','+','-','_'];
const list = document.getElementById('list');
const btn = document.getElementById('genBtn');
const moreBtn = document.getElementById('moreBtn');

function rand(arr){ return arr[Math.floor(Math.random()*arr.length)] }
function randDigit(){ return Math.floor(Math.random()*10) }
function cap(w){ return w.charAt(0).toUpperCase() + w.slice(1) }

function normalizePL(str){
  const map = {
    'ƒÖ':'a','ƒá':'c','ƒô':'e','≈Ç':'l','≈Ñ':'n','√≥':'o','≈õ':'s','≈º':'z','≈∫':'z',
    'ƒÑ':'A','ƒÜ':'C','ƒò':'E','≈Å':'L','≈É':'N','√ì':'O','≈ö':'S','≈ª':'Z','≈π':'Z'
  };
  return str.replace(/[ƒÖƒáƒô≈Ç≈Ñ√≥≈õ≈º≈∫ƒÑƒÜƒò≈Å≈É√ì≈ö≈ª≈π]/g, m => map[m] || m);
}

async function loadWords(){
  try{
    const res = await fetch('baza.txt', { cache: 'no-store' });
    if(!res.ok) throw new Error('HTTP ' + res.status);

    const text = await res.text();

    WORDS = text
      .replace(/^\uFEFF/, '')
      .split(/\r?\n/)
      .map(w => w.trim().toLowerCase())
      .filter(w => w.length >= 5);

    READY = true;
    btn.disabled = false;
    btn.textContent = 'Generuj 5 hase≈Ç';
  } catch(e){
    btn.textContent = 'B≈ÅƒÑD ≈ÅADOWANIA BAZY';
    btn.disabled = true;
  }
}

function generatePassword(){
  if(!READY || WORDS.length === 0) return 'B≈ÅƒÑD_BRAK_BAZY';

  const w1 = normalizePL(cap(rand(WORDS)));
  const w2 = normalizePL(cap(rand(WORDS)));
  const d1 = randDigit();
  const d2 = randDigit();
  const s1 = rand(specials);
  const s2 = rand(specials);

  return `${w1}${w2}${d1}${d2}${s1}${s2}`;
}

btn.addEventListener('click',()=>{
  if(!READY){
    alert('Baza s≈Ç√≥w jeszcze siƒô ≈Çaduje.');
    return;
  }
  list.innerHTML = '';
  for(let i=0;i<5;i++){
    const pass = generatePassword();

    const div = document.createElement('div');
    div.className = 'item';

    const span = document.createElement('span');
    span.className = 'pass';
    span.textContent = pass;

    const b = document.createElement('button');
    b.className = 'copy';
    b.textContent = 'Kopiuj';
    b.onclick = ()=>{
      navigator.clipboard.writeText(pass);
      b.textContent = 'Skopiowano';
      setTimeout(()=>b.textContent='Kopiuj',1200);
    };

    div.appendChild(span);
    div.appendChild(b);
    list.appendChild(div);
  }
});

const modal = document.getElementById('modal');
const modalList = document.getElementById('modalList');
const closeModal = document.getElementById('closeModal');

moreBtn.addEventListener('click', ()=>{
  if(!READY){
    alert('Baza s≈Ç√≥w jeszcze siƒô ≈Çaduje.');
    return;
  }
  let out = '';
  for(let i=0;i<20;i++){
    out += generatePassword() + '\n';
  }
  modalList.textContent = out.trim();
  modal.style.display = 'flex';
});

closeModal.onclick = ()=> modal.style.display = 'none';
modal.onclick = e => { if(e.target === modal) modal.style.display = 'none'; };

btn.disabled = true;
btn.textContent = '≈Åadowanie bazy‚Ä¶';
loadWords();
document.getElementById('year').textContent = new Date().getFullYear();
</script>

</body>
</html>
